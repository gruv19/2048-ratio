var P=Object.defineProperty;var b=(n,t,s)=>t in n?P(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var a=(n,t,s)=>(b(n,typeof t!="symbol"?t+"":t,s),s);const L=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const l of u.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&e(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerpolicy&&(u.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?u.credentials="include":i.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function e(i){if(i.ep)return;i.ep=!0;const u=s(i);fetch(i.href,u)}};L();const d={SIZE:50,GAP:5},r={SIZE:5,ANIMATION_DELAY:200},C=[2,2,2,2,4],o=['{"x":0,"y":0}','{"x":0,"y":1}','{"x":0,"y":2}','{"x":0,"y":3}','{"x":0,"y":4}','{"x":1,"y":0}','{"x":1,"y":1}','{"x":1,"y":2}','{"x":1,"y":3}','{"x":1,"y":4}','{"x":2,"y":0}','{"x":2,"y":1}','{"x":2,"y":2}','{"x":2,"y":3}','{"x":2,"y":4}','{"x":3,"y":0}','{"x":3,"y":1}','{"x":3,"y":2}','{"x":3,"y":3}','{"x":3,"y":4}','{"x":4,"y":0}','{"x":4,"y":1}','{"x":4,"y":2}','{"x":4,"y":3}','{"x":4,"y":4}'],E={GOAL:2048,TIME:9+590+590*60+990*60*60};function w(){return'<div class="board__cell"></div>'}function Y(){return`<div class="board">
    ${w().repeat(r.SIZE**2)}
  </div>`}function G(){return`<main class="game">
    <h1 class="game__title">2048</h1>
    <div class="game__menu"></div>
    <div class="game__results"></div>
    <div class="game__board"></div>
    <div class="game__statistic"></div>
  </main>`}function X(n){return`<div class="menu">
    <span class="menu__username">${n}</span>
    <button class="menu__button menu__button--play button button--play-pause" id="play">
      ${p(!0)}
    </button>
    <button class="menu__button menu__button--reset button button--reset" id="reset">
      <svg class="menu__icon menu__icon--reset" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path fill="none" stroke="#000" stroke-width="2" d="M20,8 C18.5974037,5.04031171 15.536972,3 12,3 C7.02943725,3 3,7.02943725 3,12 C3,16.9705627 7.02943725,21 12,21 L12,21 C16.9705627,21 21,16.9705627 21,12 M21,3 L21,9 L15,9"/>
      </svg>
    </button>
  </div>`}function B(){return`<div class="results">
    <div class="results__time">
      <span class="results__icon-container">
        <svg class="results__icon results__icon--time" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 296.228 296.228">
          <g>
            <path d="m167.364,48.003v-23.003h10.5c6.903,0 12.5-5.597 12.5-12.5s-5.596-12.5-12.5-12.5h-59.5c-6.903,0-12.5,5.597-12.5,12.5s5.597,12.5 12.5,12.5h10.5v23.003c-59.738,9.285-105.604,61.071-105.604,123.37-3.55271e-15,68.845 56.01,124.854 124.854,124.854s124.854-56.01 124.854-124.854c0-62.299-45.866-114.085-105.604-123.37zm-19.25,223.225c-55.06,0-99.854-44.795-99.854-99.854s44.795-99.854 99.854-99.854 99.854,44.795 99.854,99.854-44.794,99.854-99.854,99.854z"/>
            <path d="m160.614,166.18v-58.889c0-6.903-5.597-12.5-12.5-12.5s-12.5,5.597-12.5,12.5v66.1c0,2.033 0.81,3.982 2.25,5.416l34.969,34.822c4.893,4.872 12.806,4.854 17.678-0.037 4.871-4.892 4.854-12.807-0.037-17.678l-29.86-29.734z"/>
          </g>
        </svg>
      </span>
      <span class="results__value"></span>
    </div>
    <div class="results__score">
      <span class="results__icon-container">
        <svg class="results__icon results__icon--score" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 217.929 217.929">
          <path d="M212.39,101.703c5.023-4.897,6.797-12.083,4.629-18.755s-7.827-11.443-14.769-12.452l-52.969-7.697
            c-0.097-0.014-0.18-0.075-0.223-0.162L125.371,14.64C122.267,8.349,115.98,4.44,108.964,4.44S95.662,8.349,92.558,14.64
            L68.87,62.637c-0.043,0.087-0.126,0.147-0.223,0.162l-52.968,7.697c-6.942,1.009-12.601,5.78-14.769,12.452
            s-0.394,13.858,4.629,18.755l38.328,37.361c0.07,0.068,0.102,0.166,0.085,0.262l-9.048,52.755
            c-1.186,6.914,1.604,13.771,7.279,17.894c5.676,4.125,13.059,4.657,19.268,1.393l47.376-24.907c0.086-0.046,0.19-0.045,0.276,0
            l47.376,24.907c2.701,1.42,5.623,2.121,8.531,2.121c3.777,0,7.53-1.184,10.736-3.514c5.675-4.123,8.464-10.98,7.279-17.895
            l-9.048-52.754c-0.017-0.096,0.016-0.194,0.085-0.262L212.39,101.703z M156.235,142.368l9.048,52.754
            c0.024,0.14,0.031,0.182-0.118,0.29c-0.149,0.108-0.187,0.088-0.312,0.022l-47.377-24.908c-5.33-2.801-11.695-2.801-17.027,0
            l-47.376,24.907c-0.125,0.065-0.163,0.086-0.312-0.022c-0.149-0.108-0.142-0.15-0.118-0.289l9.048-52.755
            c1.018-5.936-0.949-11.989-5.262-16.194L18.103,88.813c-0.101-0.099-0.132-0.128-0.075-0.303c0.057-0.175,0.099-0.181,0.239-0.202
            l52.968-7.697c5.961-0.866,11.111-4.607,13.776-10.008l23.688-47.998c0.063-0.126,0.081-0.165,0.265-0.165s0.203,0.039,0.265,0.165
            l23.688,47.998c2.666,5.401,7.815,9.143,13.776,10.008l52.968,7.697c0.14,0.021,0.182,0.027,0.239,0.202
            c0.057,0.175,0.026,0.205-0.075,0.303l-38.328,37.361C157.185,130.378,155.218,136.432,156.235,142.368z"/>
        </svg>
      </span>
      <span class="results__value">203040509020</span>
    </div>
  </div>`}function D(){return`<div class="statistic">
    <div class="statistic__time">
      <h2 class="statistic__title">\u0420\u0435\u043A\u043E\u0440\u0434\u044B \u0432\u0440\u0435\u043C\u0435\u043D\u0438</h2>
      <div class="statistic__table statistic__table--time"></div>
    </div>
    <div class="statistic__score">
      <h2 class="statistic__title">\u0420\u0435\u043A\u043E\u0440\u0434\u044B \u043D\u0430\u0431\u0440\u0430\u043D\u043D\u044B\u0445 \u043E\u0447\u043A\u043E\u0432</h2>
      <div class="statistic__table statistic__table--score"></div>
    </div>
  </div>`}function f(n="",t=""){return n&&t?`<div class="statistic__row">
      <div class="statistic__cell-name">${n}</div>
      <div class="statistic__cell-result">${t}</div>
    </div>`:'<div class="statistic__row statistic__row--empty">\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432 \u043F\u043E\u043A\u0430 \u043D\u0435\u0442</div>'}function p(n){return n?`<svg class="menu__icon menu__icon--play" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M18.54,9,8.88,3.46a3.42,3.42,0,0,0-5.13,3V17.58A3.42,3.42,0,0,0,7.17,21a3.43,3.43,0,0,0,1.71-.46L18.54,15a3.42,3.42,0,0,0,0-5.92Zm-1,4.19L7.88,18.81a1.44,1.44,0,0,1-1.42,0,1.42,1.42,0,0,1-.71-1.23V6.42a1.42,1.42,0,0,1,.71-1.23A1.51,1.51,0,0,1,7.17,5a1.54,1.54,0,0,1,.71.19l9.66,5.58a1.42,1.42,0,0,1,0,2.46Z"/>
      </svg>`:`<svg class="menu__icon--pause" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44">
        <path d="M15.5,0c-1.103,0-2,0.897-2,2v40c0,1.103,0.897,2,2,2s2-0.897,2-2V2C17.5,0.897,16.603,0,15.5,0z"/>
        <path d="M28.5,0c-1.103,0-2,0.897-2,2v40c0,1.103,0.897,2,2,2s2-0.897,2-2V2C30.5,0.897,29.603,0,28.5,0z"/>
      </svg>`}function M(n,t){return Math.floor(Math.random()*(t+1-n)+n)}function O(n,t){t.splice(n,1)}function I(n){const t=n%10;n=Math.trunc(n/10);const s=n%60;n=Math.trunc(n/60);const e=n%60;return n=Math.trunc(n/60),`${n<=9?`0${n}`:n}:${e<=9?`0${e}`:e}:${s<=9?`0${s}`:s}.${t}`}function A(n,t,s){document.addEventListener("keydown",e=>{if(e.keyCode===37)e.preventDefault(),n.apply(s,["left",S]);else if(e.keyCode===38)e.preventDefault(),t.apply(s,["up",_]);else if(e.keyCode===39)e.preventDefault(),n.apply(s,["right",x]);else if(e.keyCode===40)e.preventDefault(),t.apply(s,["down",v]);else return})}function N(n,t,s){const e={x:0,y:0},i={x:0,y:0};document.addEventListener("mousedown",u=>{e.x=u.x,e.y=u.y}),document.addEventListener("mouseup",u=>{i.x=u.x,i.y=u.y;let l=Math.abs(i.x-e.x),h=Math.abs(i.y-e.y);if(l>=h)if(e.x>i.x)n.apply(s,["left",S]);else if(e.x<i.x)n.apply(s,["right",x]);else return;else if(e.y>i.y)t.apply(s,["up",_]);else if(e.y<i.y)t.apply(s,["down",v]);else return})}function Z(n,t,s){const e={x:0,y:0},i={x:0,y:0};s.getElement().addEventListener("touchstart",u=>{u.preventDefault(),e.x=u.changedTouches[0].clientX,e.y=u.changedTouches[0].clientY}),s.getElement().addEventListener("touchend",u=>{i.x=u.changedTouches[0].clientX,i.y=u.changedTouches[0].clientY;let l=Math.abs(i.x-e.x),h=Math.abs(i.y-e.y);if(l>=h)if(e.x>i.x)n.apply(s,["left",S]);else if(e.x<i.x)n.apply(s,["right",x]);else return;else if(e.y>i.y)t.apply(s,["up",_]);else if(e.y<i.y)t.apply(s,["down",v]);else return})}function x(n,t){for(let s=t;s<r.SIZE;s++){let e=-1;for(let i=r.SIZE-1;i>-1;i--)if(e=n.findIndex(u=>u.getX()===i&&u.getY()===s),e>-1)return e}return-1}function S(n,t){for(let s=t;s<r.SIZE;s++){let e=-1;for(let i=0;i<r.SIZE;i++)if(e=n.findIndex(u=>u.getX()===i&&u.getY()===s),e>-1)return e}return-1}function _(n,t){for(let s=t;s<r.SIZE;s++){let e=-1;for(let i=0;i<r.SIZE;i++)if(e=n.findIndex(u=>u.getX()===s&&u.getY()===i),e>-1)return e}return-1}function v(n,t){for(let s=t;s<r.SIZE;s++){let e=-1;for(let i=r.SIZE-1;i>-1;i--)if(e=n.findIndex(u=>u.getX()===s&&u.getY()===i),e>-1)return e}return-1}function y(n,t,s){if(n.x===t.x&&n.y===t.y)return;const e=s.findIndex(i=>i===JSON.stringify(t));s.splice(e,1),s.push(JSON.stringify(n))}class V{constructor(t,s,e){a(this,"element");a(this,"value");a(this,"x");a(this,"y");this.element=null,this.value=e,this.x=t,this.y=s}getElement(){return this.element||(this.element=document.createElement("div"),this.render(),this.element.textContent=this.value,this.element.classList.add("cell",`cell--${this.value}`)),this.element}getX(){return this.x}getY(){return this.y}getValue(){return this.value}updateValue(){this.value=this.value*2,this.element.textContent=this.value,this.element.classList.replace(`cell--${this.value/2}`,`cell--${this.value}`)}updatePosition(t,s){this.x===t&&this.y===s||(this.x=t,this.y=s,this.render())}render(){this.element.style.left=`${this.x*d.SIZE+(this.x+1)*d.GAP}px`,this.element.style.top=`${this.y*d.SIZE+(this.y+1)*d.GAP}px`}toBackground(){this.getElement().style.zIndex="10"}toForeground(){this.getElement().style.zIndex="100"}}class ${constructor(t){a(this,"element");a(this,"cells");a(this,"game");this.element=null,this.cells=[],this.game=t}getElement(){if(!this.element){const t=document.createElement("div");t.innerHTML=Y(),this.element=t.firstChild}return this.element}init(){this.addCell(),this.addCell(),A(this.horizontalMove,this.verticalMove,this),N(this.horizontalMove,this.verticalMove,this),Z(this.horizontalMove,this.verticalMove,this)}addCell(){if(this.cells.length<r.SIZE**2){const t=C[M(0,C.length-1)],s=M(0,o.length-1),e=JSON.parse(o[s]),i=new V(e.x,e.y,t);this.cells.push(i),O(s,o),this.element.appendChild(i.getElement()),this.cells.length===r.SIZE**2&&setTimeout(()=>this.checkSteps(),r.ANIMATION_DELAY)}}unionCells(t,s){const e={x:t.getX(),y:t.getY()},i=this.cells.findIndex(u=>u.getX()===e.x&&u.getY()===e.y);o.push(JSON.stringify(e)),t.toBackground(),s.toForeground(),t.updatePosition(s.getX(),s.getY()),s.updateValue(),this.game.getScoreCounter().setPoints(s.getValue()),setTimeout(()=>{t.getElement().remove(),s.getElement().style.zIndex="",this.game.endTimeGame()},r.ANIMATION_DELAY),this.cells.splice(i,1)}moveRowHorizontal(t,s){let e=!0,i=t.length-2;for(;i>-1;){const u=t[i].getY();if(t[i].getValue()!==t[i+1].getValue()||!e){const l=s==="left"?t[i+1].getX()+1:t[i+1].getX()-1;y({x:t[i].getX(),y:t[i].getY()},{x:l,y:u},o),t[i].updatePosition(l,u),e=!0}else this.unionCells(t[i],t[i+1]),t.splice(i,1),e=!1;i--}}moveRowVertical(t,s){let e=!0,i=t.length-2;for(;i>-1;){const u=t[i].getX();if(t[i].getValue()!==t[i+1].getValue()||!e){const l=s==="up"?t[i+1].getY()+1:t[i+1].getY()-1;y({x:t[i].getX(),y:t[i].getY()},{x:u,y:l},o),t[i].updatePosition(u,l),e=!0}else this.unionCells(t[i],t[i+1]),t.splice(i,1),e=!1;i--}}horizontalMove(t,s){let e=0;const i=[...o];for(;e<r.SIZE;){let u=s(this.cells,e);if(u===-1)break;e=this.cells[u].getY();const l={x:this.cells[u].getX(),y:e},h=t==="left"?{x:0,y:e}:{x:r.SIZE-1,y:e};y(l,h,o),this.cells[u].updatePosition(h.x,e);const m=this.cells.filter(c=>c.getY()===e);m.length>1&&(t==="left"?m.sort((c,g)=>g.getX()-c.getX()):m.sort((c,g)=>c.getX()-g.getX()),this.moveRowHorizontal(m,t)),e+=1}this.isChanged(i,o)&&setTimeout(()=>this.addCell(),r.ANIMATION_DELAY),this.game.togglePlayPause()}verticalMove(t,s){let e=0;const i=[...o];for(;e<r.SIZE;){let u=s(this.cells,e);if(u===-1)break;e=this.cells[u].getX();const l={x:e,y:this.cells[u].getY()},h=t==="up"?{x:e,y:0}:{x:e,y:r.SIZE-1};y(l,h,o),this.cells[u].updatePosition(e,h.y);const m=this.cells.filter(c=>c.getX()===e);m.length>1&&(t==="up"?m.sort((c,g)=>g.getY()-c.getY()):m.sort((c,g)=>c.getY()-g.getY()),this.moveRowVertical(m,t)),e+=1}this.isChanged(i,o)&&setTimeout(()=>this.addCell(),r.ANIMATION_DELAY),this.game.togglePlayPause()}isChanged(t,s){return JSON.stringify(t)!==JSON.stringify(s)}checkSteps(){for(let t of this.cells)if(this.cells.find(e=>t.getX()+1===e.getX()&&t.getY()===e.getY()&&t.getValue()===e.getValue()||t.getX()-1===e.getX()&&t.getY()===e.getY()&&t.getValue()===e.getValue()||t.getX()===e.getX()&&t.getY()+1===e.getY()&&t.getValue()===e.getValue()||t.getX()===e.getX()&&t.getY()-1===e.getY()&&t.getValue()===e.getValue()))return;this.game.over()}checkGoal(){return this.cells.filter(t=>t.getValue()>=E.GOAL).length}reset(){this.cells.forEach(t=>t.getElement().remove()),this.cells=[],o.length=0,o.push('{"x":0,"y":0}','{"x":0,"y":1}','{"x":0,"y":2}','{"x":0,"y":3}','{"x":0,"y":4}','{"x":1,"y":0}','{"x":1,"y":1}','{"x":1,"y":2}','{"x":1,"y":3}','{"x":1,"y":4}','{"x":2,"y":0}','{"x":2,"y":1}','{"x":2,"y":2}','{"x":2,"y":3}','{"x":2,"y":4}','{"x":3,"y":0}','{"x":3,"y":1}','{"x":3,"y":2}','{"x":3,"y":3}','{"x":3,"y":4}','{"x":4,"y":0}','{"x":4,"y":1}','{"x":4,"y":2}','{"x":4,"y":3}','{"x":4,"y":4}'),this.addCell(),this.addCell()}renderResize(){this.cells.forEach(t=>t.render())}}function T(){window.innerWidth<767?(d.SIZE=44,d.GAP=10):(d.SIZE=84,d.GAP=15)}function F(n,t){const s=document.querySelector(".menu__button--play");s&&s.addEventListener("click",n.bind(t))}function H(n,t){const s=document.querySelector(".menu__button--reset");s&&s.addEventListener("click",n.bind(t))}class k{constructor(t){a(this,"id");a(this,"count");a(this,"element");a(this,"game");this.id=null,this.count=0,this.game=t,this.element=null}init(){this.id=null,this.count=0,this.updateElement()}getElement(){return this.element||(this.element=this.game.getMainElement().querySelector(".results__time > .results__value")),this.element}start(){this.id=setInterval(()=>{this.count+=1,this.updateElement(),this.game.getInProgress()===!1&&this.stop(),this.countIsMax()&&this.game.endTimeGame()},100)}stop(){clearInterval(this.id),this.id=null}updateElement(){this.getElement().textContent=`${I(this.getCount())}`}getCount(){return this.count}countIsMax(){return this.count>=E.TIME}countIsZero(){return this.count===0}}class z{constructor(t){a(this,"count");a(this,"element");a(this,"game");this.count=0,this.element=null,this.game=t}init(){this.count=0,this.updateElement()}getElement(){return this.element||(this.element=this.game.getMainElement().querySelector(".results__score > .results__value")),this.element}updateElement(){this.getElement().textContent=`${this.count}`}getCount(){return this.count}setPoints(t){this.count+=t,this.updateElement()}}class q{constructor(){a(this,"mainElement");a(this,"timeStatistic");a(this,"timeStatisticElement");a(this,"scoreStatistic");a(this,"scoreStatisticElement");this.mainElement=null,this.timeStatistic=[],this.timeStatisticElement=null,this.scoreStatistic=[],this.scoreStatisticElement=null}getMainElement(){if(!this.mainElement){const t=document.createElement("div");t.innerHTML=D(),this.mainElement=t.firstChild}return this.mainElement}getTimeStatisticElement(){return this.timeStatisticElement||(this.timeStatisticElement=this.getMainElement().querySelector(".statistic__table--time")),this.timeStatisticElement}getTimeGameStatistic(){const t=localStorage.getItem("timeGame");t?this.timeStatistic=JSON.parse(t):this.timeStatistic=[],this.renderTimeGameStatistic()}setTimeGameStatistic(t,s){const e={_id:Date.now()+parseInt(`${Math.random()*1e3}`,10),username:t,time:s};this.timeStatistic.push(e),localStorage.setItem("timeGame",JSON.stringify(this.timeStatistic)),this.renderTimeGameStatistic()}renderTimeGameStatistic(){if(!this.timeStatistic.length){this.getTimeStatisticElement().innerHTML=f();return}this.getTimeStatisticElement().innerHTML="";let t="";this.timeStatistic.sort((s,e)=>s.time-e.time).forEach(s=>{t+=f(s.username,I(s.time))}),this.getTimeStatisticElement().insertAdjacentHTML("beforeend",t)}getScoreStatisticElement(){return this.scoreStatisticElement||(this.scoreStatisticElement=this.getMainElement().querySelector(".statistic__table--score")),this.scoreStatisticElement}setScoreGameStatistic(t,s){const e={_id:Date.now()+parseInt(`${Math.random()*1e3}`,10),username:t,score:s};this.scoreStatistic.push(e),localStorage.setItem("scoreGame",JSON.stringify(this.scoreStatistic)),this.renderScoreGameStatistic()}getScoreGameStatistic(){const t=localStorage.getItem("scoreGame");t?this.scoreStatistic=JSON.parse(t):this.scoreStatistic=[],this.renderScoreGameStatistic()}renderScoreGameStatistic(){if(!this.scoreStatistic.length){this.getScoreStatisticElement().innerHTML=f();return}this.getScoreStatisticElement().innerHTML="";let t="";this.scoreStatistic.sort((s,e)=>e.score-s.score).forEach(s=>{t+=f(s.username,s.score)}),this.getScoreStatisticElement().insertAdjacentHTML("beforeend",t)}reset(){this.timeStatistic=[],this.scoreStatistic=[],this.getTimeGameStatistic(),this.getScoreGameStatistic()}}class R{constructor(){a(this,"gameElement");a(this,"boardComponent");a(this,"username");a(this,"playPauseFlag");a(this,"inProgress");a(this,"timeCounter");a(this,"scoreCounter");a(this,"statistic");this.gameElement=null,this.boardComponent=new $(this),this.username="",this.playPauseFlag=!1,this.inProgress=!0,this.timeCounter=new k(this),this.scoreCounter=new z(this),this.statistic=new q}init(){this.render(),this.boardComponent.init(),this.timeCounter.init(),this.scoreCounter.init(),this.statistic.getTimeGameStatistic(),this.statistic.getScoreGameStatistic(),this.getMainElement().querySelector(".game__menu").innerHTML="",this.getMainElement().querySelector(".game__menu").insertAdjacentHTML("beforeend",X(this.username)),F(this.playPauseHandler,this),H(this.reset,this)}getScoreCounter(){return this.scoreCounter}reRenderBoardComponent(){this.boardComponent.renderResize()}render(){document.body.appendChild(this.getMainElement()),this.getMainElement().querySelector(".game__results").insertAdjacentHTML("beforeend",B()),this.getMainElement().querySelector(".game__board").append(this.boardComponent.getElement()),this.getMainElement().querySelector(".game__statistic").append(this.statistic.getMainElement()),T()}getMainElement(){if(!this.gameElement){const t=document.createElement("div");t.innerHTML=G(),this.gameElement=t.firstChild}return this.gameElement}getInProgress(){return this.inProgress}setUsername(){const t=this.scoreCounter.getCount()===E.GOAL?`\u0422\u044B \u043D\u0430\u0431\u0440\u0430\u043B ${E.GOAL}. \u0412\u0432\u0435\u0434\u0438 \u0441\u0432\u043E\u0435 \u0438\u043C\u044F, \u0447\u0442\u043E\u0431\u044B \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442!`:"\u0412\u0432\u0435\u0434\u0438 \u0441\u0432\u043E\u0435 \u0438\u043C\u044F, \u0447\u0442\u043E\u0431\u044B \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442!";this.username=prompt(t)||""}endTimeGame(){if(this.inProgress===!1)return;let t=0;if(this.boardComponent&&(t=this.boardComponent.checkGoal()),t!==0){this.inProgress=!1,this.timeCounter.stop(),this.setUsername(),this.statistic.setTimeGameStatistic(this.username,this.timeCounter.getCount()),this.resetOrContinue();return}if(this.timeCounter.countIsMax()){this.timeCounter.stop();return}}setInProgress(t){this.inProgress=t}resetOrContinue(){confirm("\u0422\u0432\u043E\u0439 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D! \u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0438\u0433\u0440\u0443?")||this.reset()}resetOrFinish(){confirm(`\u0425\u043E\u0434\u043E\u0432 \u0431\u043E\u043B\u044C\u0448\u0435 \u043D\u0435\u0442! \u0422\u044B \u043D\u0430\u0431\u0440\u0430\u043B ${this.scoreCounter.getCount()}! \u041D\u0430\u0447\u0430\u0442\u044C \u0437\u0430\u043D\u043E\u0432\u043E?`)&&this.reset()}over(){this.username||this.setUsername(),this.statistic.setScoreGameStatistic(this.username,this.scoreCounter.getCount()),this.setInProgress(!1),this.timeCounter.stop(),this.resetOrFinish()}reset(){this.timeCounter.stop(),this.timeCounter.init(),this.scoreCounter.init(),this.playPauseFlag=!1,this.getMainElement().querySelector(".menu__button--play").innerHTML=p(!0),this.inProgress=!0,this.statistic.reset(),this.username="",this.boardComponent&&this.boardComponent.reset()}getPlayPauseFlag(){return this.playPauseFlag}playPauseHandler(){this.inProgress!==!1&&(this.playPauseFlag?(this.playPauseFlag=!1,this.timeCounter.stop(),this.getMainElement().querySelector(".menu__button--play").innerHTML=p(!0)):(this.playPauseFlag=!0,this.timeCounter.start(),this.getMainElement().querySelector(".menu__button--play").innerHTML=p(!1)))}togglePlayPause(){if(this.timeCounter.countIsZero()){this.playPauseHandler();return}if(!this.getPlayPauseFlag()){this.playPauseHandler();return}}}document.addEventListener("DOMContentLoaded",()=>{const n=new R;n.init(),window.addEventListener("resize",()=>{T(),n.reRenderBoardComponent()})});
